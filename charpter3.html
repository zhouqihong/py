<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>第3章 · 常见语句</title>
  
  <style>
    body{margin:0;font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Noto Sans CJK SC","Microsoft YaHei",sans-serif;background:#ffffff;color:#0f172a}
    .wrap{max-width:900px;margin:0 auto;padding:32px 20px}
    h1{margin:8px 0 12px}
    h2{margin-top:28px;border-bottom:1px solid #e2e8f0;padding-bottom:8px}
    h3{margin-top:24px}
    a{color:#0ea5e9;text-decoration:none}
    a:hover{color:#0284c7}
    .card{border:1px solid #e2e8f0;border-radius:16px;padding:28px;background:#fff;box-shadow:0 8px 30px rgba(2,8,23,.06);margin-top:24px}
    .list{padding-left:24px;line-height:1.8}
    .list li{margin-bottom:10px}
    .linkback{display:inline-flex;align-items:center;margin-top:14px;padding:8px 16px;background:#f1f5f9;border-radius:8px;font-weight:500}
    .linkback:hover{background:#e2e8f0}
    code{background:#f8fafc;padding:2px 6px;border-radius:6px;border:1px solid #e2e8f0;font-family:Monaco,Consolas,monospace}
    pre {
      background: #f6f8fa;
      color: #24292e;
      padding: 20px;
      border-radius: 6px;
      overflow: auto;
      margin: 20px 0;
      line-height: 1.45;
      font-family: "SFMono-Regular", "Consolas", "Liberation Mono", "Menlo", monospace;
      border: 1px solid #e1e4e8;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    pre code {
      background: transparent;
      padding: 0;
      border: none;
      border-radius: 0;
      color: inherit;
      font-size: 14px;
    }
    .note{background:#f0f9ff;border-left:4px solid #0ea5e9;padding:16px 20px;margin:20px 0;border-radius:0 8px 8px 0}
    .chapter-nav{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px;margin-top:32px}
    .chapter-card{background:#f8fafc;padding:20px;border-radius:12px;border:1px solid #e2e8f0;transition:all 0.2s ease}
    .chapter-card:hover{transform:translateY(-4px);box-shadow:0 12px 20px rgba(2,8,23,.08)}
    .chapter-card h3{margin-top:0;font-size:18px}
    .chapter-number{display:inline-block;background:#0ea5e9;color:white;width:32px;height:32px;border-radius:50%;text-align:center;line-height:32px;margin-right:10px;font-weight:bold}
    
    /* Jupyter Notebook风格语法高亮 */
    .hljs-comment,
    .hljs-quote {color: #8c8c8c; font-style: italic;}
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-subst {color: #d73a49;}
    .hljs-number,
    .hljs-literal {color: #005cc5;}
    .hljs-string,
    .hljs-doctag,
    .hljs-formula {color: #032f62;}
    .hljs-title,
    .hljs-section,
    .hljs-selector-id {color: #6f42c1;}
    .hljs-built_in,
    .hljs-class .hljs-title {color: #6f42c1;}
    .hljs-params {color: #24292e;}
    .hljs-attribute {color: #6f42c1;}
    .hljs-name {color: #22863a;}
    .hljs-tag {color: #22863a;}
    .hljs-variable,
    .hljs-template-variable {color: #e36209;}
    .hljs-regexp,
    .hljs-link {color: #d73a49;}
    .hljs-symbol,
    .hljs-bullet {color: #e36209;}
    .hljs-meta {color: #6f42c1;}
    .hljs-meta .hljs-keyword {color: #6f42c1;}
    
    /* DeepSeek学伴样式 */
    .deepseek-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 1px solid #bae6fd;
    }
    .deepseek-header {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }
    .deepseek-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      color: white;
      font-weight: bold;
    }
    .deepseek-chat {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 16px;
      padding: 16px;
      background: #f8fafc;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
    }
    .message {
      margin-bottom: 12px;
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 85%;
    }
    .user-message {
      background: #0ea5e9;
      color: white;
      margin-left: auto;
    }
    .ai-message {
      background: white;
      border: 1px solid #e2e8f0;
    }
    .deepseek-input {
      display: flex;
      gap: 10px;
    }
    .deepseek-input textarea {
      flex: 1;
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      resize: vertical;
      min-height: 60px;
      font-family: inherit;
    }
    .deepseek-input button {
      background: #0ea5e9;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0 20px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.2s;
    }
    .deepseek-input button:hover {
      background: #0284c7;
    }
    .deepseek-input button:disabled {
      background: #94a3b8;
      cursor: not-allowed;
    }
    .typing-indicator {
      display: inline-block;
      padding: 8px 12px;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      color: #64748b;
      font-style: italic;
    }
    .dot-flashing {
      position: relative;
      width: 10px;
      height: 10px;
      border-radius: 5px;
      background-color: #64748b;
      color: #64748b;
      animation: dot-flashing 1s infinite linear alternate;
      animation-delay: 0.5s;
      display: inline-block;
      margin-left: 5px;
    }
    .dot-flashing::before, .dot-flashing::after {
      content: '';
      display: inline-block;
      position: absolute;
      top: 0;
    }
    .dot-flashing::before {
      left: -15px;
      width: 10px;
      height: 10px;
      border-radius: 5px;
      background-color: #64748b;
      color: #64748b;
      animation: dot-flashing 1s infinite alternate;
      animation-delay: 0s;
    }
    .dot-flashing::after {
      left: 15px;
      width: 10px;
      height: 10px;
      border-radius: 5px;
      background-color: #64748b;
      color: #64748b;
      animation: dot-flashing 1s infinite alternate;
      animation-delay: 1s;
    }
    @keyframes dot-flashing {
      0% {
        background-color: #64748b;
      }
      50%, 100% {
        background-color: rgba(100, 116, 139, 0.2);
      }
    }
  </style>

</head>
<body>
  <div class="wrap">
    <!-- DeepSeek学伴模块 -->
    <div class="card deepseek-card">
      <div class="deepseek-header">
        <div class="deepseek-icon">DS</div>
        <h2 style="margin:0">DeepSeek学伴</h2>
      </div>
      <p>我是您的Python学习助手，可以解答关于Python常见语句和编程控制结构的问题。</p>
      
      <div class="deepseek-chat" id="chat-container">
        <div class="message ai-message">
          您好！我是DeepSeek学伴，可以为您解答Python常见语句相关的问题，包括条件语句、循环语句、用户输入和异常处理等。请问有什么可以帮助您的吗？
        </div>
      </div>
      
      <div class="deepseek-input">
        <textarea id="user-input" placeholder="请输入您的问题..."></textarea>
        <button id="send-btn">发送</button>
      </div>
    </div>
    
    <a class="linkback" href="index.html">← 返回首页</a>
    <h1>第3章 · 常见语句</h1>
    
    <div class="card">
      <h2>Python常见语句</h2>
      <p>掌握Python中的常见语句是编写复杂程序的关键。本章将深入讲解条件语句、循环语句、用户输入与交互以及异常处理语句，帮助您构建更加健壮和交互性强的Python程序。</p>
      
      <div class="note">
        <strong>学习目标：</strong>完成本章后，您将能够熟练使用条件语句进行逻辑判断，掌握循环语句处理重复任务，理解用户输入与交互的方法，并能够编写健壮的异常处理代码。
      </div>
      
      <h3>本章内容概览</h3>
      <ul class="list">
        <li>条件语句：if、elif、else的使用</li>
        <li>循环语句：for循环和while循环</li>
        <li>用户输入与交互：input()函数的使用</li>
        <li>异常处理：try、except、finally语句</li>
      </ul>
      
      <h3>常见语句示例</h3>
      <pre><code><span class="hljs-comment"># 条件语句示例</span>
score = 85
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span>:
    grade = <span class="hljs-string">"优秀"</span>
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">80</span>:
    grade = <span class="hljs-string">"良好"</span>
<span class="hljs-keyword">elif</span> score &gt;= <span class="hljs-number">60</span>:
    grade = <span class="hljs-string">"及格"</span>
<span class="hljs-keyword">else</span>:
    grade = <span class="hljs-string">"不及格"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"85分的成绩等级: <span class="hljs-subst">{grade}</span>"</span>)

<span class="hljs-comment"># 循环语句示例</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nfor循环示例:"</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"当前数字: <span class="hljs-subst">{i}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nwhile循环示例:"</span>)
count = <span class="hljs-number">5</span>
<span class="hljs-keyword">while</span> count &gt; <span class="hljs-number">0</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"倒计时: <span class="hljs-subst">{count}</span>"</span>)
    count -= <span class="hljs-number">1</span>

<span class="hljs-comment"># 用户输入与交互示例</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n用户输入与交互示例:"</span>)
name = <span class="hljs-built_in">input</span>(<span class="hljs-string">"请输入您的姓名: "</span>)
age = <span class="hljs-built_in">input</span>(<span class="hljs-string">"请输入您的年龄: "</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"您好，<span class="hljs-subst">{name}</span>！您今年<span class="hljs-subst">{age}</span>岁。"</span>)

<span class="hljs-comment"># 异常处理示例</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n异常处理示例:"</span>)
<span class="hljs-keyword">try</span>:
    num = <span class="hljs-number">2</span>  <span class="hljs-comment"># 这里可以尝试修改为0或非数字值来测试异常</span>
    result = <span class="hljs-number">10</span> / num
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"10除以<span class="hljs-subst">{num}</span>的结果是: <span class="hljs-subst">{result}</span>"</span>)
<span class="hljs-keyword">except</span> ZeroDivisionError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"错误: 不能除以零!"</span>)
<span class="hljs-keyword">except</span> ValueError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"错误: 请输入有效的数字!"</span>)
<span class="hljs-keyword">finally</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"程序执行完毕。"</span>)</code></pre>
    </div>
    
    <div class="card">
      <h2>导航</h2>
      <ul class="list">
        <li><a href="chapter3_1.html">3.1 条件</a></li>
        <li><a href="chapter3_2.html">3.2 循环</a></li>
        <li><a href="chapter3_3.html">3.3 用户输入与交互（input()）</a></li>
        <li><a href="chapter3_4.html">3.4 异常处理</a></li>
      </ul>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const chatContainer = document.getElementById('chat-container');
      const userInput = document.getElementById('user-input');
      const sendBtn = document.getElementById('send-btn');
      
      const API_KEY = 'sk-03543c891dbc4c2b84bf8eec9e8b0e89';
      const API_URL = 'https://api.deepseek.com/v1/chat/completions';
      
      // 添加消息到聊天容器
      function addMessage(content, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
        messageDiv.textContent = content;
        chatContainer.appendChild(messageDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
      
      // 显示正在输入指示器
      function showTypingIndicator() {
        const indicatorDiv = document.createElement('div');
        indicatorDiv.className = 'message ai-message';
        indicatorDiv.id = 'typing-indicator';
        indicatorDiv.innerHTML = '<span class="typing-indicator">思考中<span class="dot-flashing"></span></span>';
        chatContainer.appendChild(indicatorDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
      
      // 隐藏正在输入指示器
      function hideTypingIndicator() {
        const indicator = document.getElementById('typing-indicator');
        if (indicator) {
          indicator.remove();
        }
      }
      
      // 发送消息到DeepSeek API
      async function sendMessageToAI(message) {
        try {
          const response = await fetch(API_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${API_KEY}`
            },
            body: JSON.stringify({
              model: 'deepseek-chat',
              messages: [
                {
                  role: 'system',
                  content: '你是一个Python编程学习助手，专门帮助学生学习Python常见语句，包括条件语句、循环语句、用户输入和异常处理等。请用中文回答所有问题，并提供清晰的解释和示例代码。'
                },
                {
                  role: 'user',
                  content: message
                }
              ],
              max_tokens: 1000,
              temperature: 0.7
            })
          });
          
          if (!response.ok) {
            throw new Error(`API请求失败: ${response.status}`);
          }
          
          const data = await response.json();
          return data.choices[0].message.content;
        } catch (error) {
          console.error('API调用错误:', error);
          return `抱歉，我暂时无法回答您的问题。错误信息: ${error.message}`;
        }
      }
      
      // 处理发送消息
      async function handleSendMessage() {
        const message = userInput.value.trim();
        if (!message) return;
        
        // 添加用户消息
        addMessage(message, true);
        userInput.value = '';
        sendBtn.disabled = true;
        
        // 显示正在输入指示器
        showTypingIndicator();
        
        try {
          // 获取AI响应
          const aiResponse = await sendMessageToAI(message);
          
          // 隐藏指示器并添加AI响应
          hideTypingIndicator();
          addMessage(aiResponse);
        } catch (error) {
          hideTypingIndicator();
          addMessage('抱歉，发生了错误，请稍后再试。');
        }
        
        sendBtn.disabled = false;
      }
      
      // 事件监听
      sendBtn.addEventListener('click', handleSendMessage);
      
      userInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleSendMessage();
        }
      });
      
      // 自动调整输入框高度
      userInput.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
      });
    });
  </script>
</body>
</html>
